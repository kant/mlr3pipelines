<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification -->
<meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84" />
<title>PipeOpEncode — mlr_pipeops_encode • mlr3pipelines</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="PipeOpEncode — mlr_pipeops_encode" />

<meta property="og:description" content="Encodes columns of type factor, character and ordered.
Possible encodings are "one-hot" encoding, as well as encoding according to stats::contr.helmert(), stats::contr.poly(),
stats::contr.sum() and stats::contr.treatment().
Newly created columns are named via pattern [column-name].[x] where x is the respective factor level for "one-hot" and
"treatment" encoding, and an integer sequence otherwise.
Use the PipeOpTaskPreproc $affect_columns functionality to only encode a subset of columns, or only encode columns of a certain type." />

<meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/comparison_mlr3pipelines_mlr_sklearn.html">Comparison to Other Packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3pipelines">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PipeOpEncode</h1>
    <small>Source: <a href='https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpEncode.R'><code>R/PipeOpEncode.R</code></a></small>
    </div>

    
    <p>Encodes columns of type <code>factor</code>, <code>character</code> and <code>ordered</code>.</p>
<p>Possible encodings are <code>"one-hot"</code> encoding, as well as encoding according to <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.helmert()</a></code>, <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.poly()</a></code>,
<code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.sum()</a></code> and <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.treatment()</a></code>.
Newly created columns are named via pattern <code>[column-name].[x]</code> where <code>x</code> is the respective factor level for <code>"one-hot"</code> and
<code>"treatment"</code> encoding, and an integer sequence otherwise.</p>
<p>Use the <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code> <code>$affect_columns</code> functionality to only encode a subset of columns, or only encode columns of a certain type.</p>
    

        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><code>R6Class</code> object inheriting from <code><a href='PipeOpTaskPreprocSimple.html'>PipeOpTaskPreprocSimple</a></code>/<code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>/<code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    <pre>PipeOpEncode$new(id = "encode", param_vals = list())
</pre>
<ul>
<li><p><code>id</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code><br />
Identifier of resulting object, default <code>"encode"</code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br />
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list()</a></code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="input-and-output-channels"><a class="anchor" href="#input-and-output-channels"></a>Input and Output Channels</h2>

    
    <p>Input and output channels are inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>.</p>
<p>The output is the input <code><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a></code> with all affected <code>factor</code>, <code>character</code> or <code>ordered</code> parameters encoded according to the <code>method</code>
parameter.</p>
    
    <h2 class="hasAnchor" id="state"><a class="anchor" href="#state"></a>State</h2>

    
    <p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, as well as:</p><ul>
<li><p><code>constrasts</code> :: named <code>list</code> of <code>matrix</code><br />
List of contrast matrices, one for each affected discrete feature. The rows of each matrix correspond to (training task) levels, the the
columns to the new columns that replace the old discrete feature. See <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrasts'>stats::contrasts</a></code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    
    <p>The parameters are the parameters inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, as well as:</p><ul>
<li><p><code>method</code>  :: <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code> <br />
Initialized to <code>"one-hot"</code>. One of:</p><ul>
<li><p><code>"one-hot"</code>: create a new column for each factor level.</p></li>
<li><p><code>"treatment"</code>: create $n-1$ columns leaving out the first factor level of each factor variable (see <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.treatment()</a></code>).</p></li>
<li><p><code>"helmert"</code>: create columns according to Helmert contrasts (see <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.helmert()</a></code>).</p></li>
<li><p><code>"poly"</code>: create columns with contrasts based on orthogonal polynomials (see <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.poly()</a></code>).</p></li>
<li><p><code>"sum"</code>: create columns with contrasts summing to zero, (see <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrast'>stats::contr.sum()</a></code>).</p></li>
</ul></li>
</ul>
    
    <h2 class="hasAnchor" id="internals"><a class="anchor" href="#internals"></a>Internals</h2>

    
    <p>Uses the <code><a href='https://www.rdocumentation.org/packages/stats/topics/contrasts'>stats::contrasts</a></code> functions. This is relatively inefficient for features with a large number of levels.</p>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <p>Only methods inherited from <code><a href='PipeOpTaskPreprocSimple.html'>PipeOpTaskPreprocSimple</a></code>/<code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>/<code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other PipeOps: <code><a href='PipeOpEnsemble.html'>PipeOpEnsemble</a></code>,
  <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, <code><a href='PipeOp.html'>PipeOp</a></code>,
  <code><a href='mlr_pipeops_branch.html'>mlr_pipeops_branch</a></code>,
  <code><a href='mlr_pipeops_chunk.html'>mlr_pipeops_chunk</a></code>,
  <code><a href='mlr_pipeops_classbalancing.html'>mlr_pipeops_classbalancing</a></code>,
  <code><a href='mlr_pipeops_classifavg.html'>mlr_pipeops_classifavg</a></code>,
  <code><a href='mlr_pipeops_colapply.html'>mlr_pipeops_colapply</a></code>,
  <code><a href='mlr_pipeops_copy.html'>mlr_pipeops_copy</a></code>,
  <code><a href='mlr_pipeops_featureunion.html'>mlr_pipeops_featureunion</a></code>,
  <code><a href='mlr_pipeops_filter.html'>mlr_pipeops_filter</a></code>,
  <code><a href='mlr_pipeops_impute.html'>mlr_pipeops_impute</a></code>,
  <code><a href='mlr_pipeops_learner.html'>mlr_pipeops_learner</a></code>,
  <code><a href='mlr_pipeops_mutate.html'>mlr_pipeops_mutate</a></code>,
  <code><a href='mlr_pipeops_nop.html'>mlr_pipeops_nop</a></code>,
  <code><a href='mlr_pipeops_pca.html'>mlr_pipeops_pca</a></code>,
  <code><a href='mlr_pipeops_regravg.html'>mlr_pipeops_regravg</a></code>,
  <code><a href='mlr_pipeops_scale.html'>mlr_pipeops_scale</a></code>,
  <code><a href='mlr_pipeops_select.html'>mlr_pipeops_select</a></code>,
  <code><a href='mlr_pipeops_subsample.html'>mlr_pipeops_subsample</a></code>,
  <code><a href='mlr_pipeops_unbranch.html'>mlr_pipeops_unbranch</a></code>,
  <code><a href='mlr_pipeops.html'>mlr_pipeops</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>mlr3</span>)

<span class='no'>task</span> <span class='kw'>=</span> <span class='no'>TaskClassif</span>$<span class='fu'>new</span>(<span class='st'>"task"</span>,
  <span class='kw pkg'>data.table</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>], <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>3</span>]), <span class='st'>"x"</span>)

<span class='no'>poe</span> <span class='kw'>=</span> <span class='fu'><a href='po.html'>po</a></span>(<span class='st'>"encode"</span>)

<span class='co'># poe is initialized with encoding: "one-hot"</span>
<span class='no'>poe</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>()</div><div class='output co'>#&gt;    x y.a y.b y.c
#&gt; 1: a   1   0   0
#&gt; 2: b   0   1   0
#&gt; 3: c   0   0   1</div><div class='input'>
<span class='co'># other kinds of encoding:</span>
<span class='no'>poe</span>$<span class='no'>param_set</span>$<span class='no'>values</span>$<span class='no'>method</span> <span class='kw'>=</span> <span class='st'>"treatment"</span>
<span class='no'>poe</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>()</div><div class='output co'>#&gt;    x y.b y.c
#&gt; 1: a   0   0
#&gt; 2: b   1   0
#&gt; 3: c   0   1</div><div class='input'>
<span class='no'>poe</span>$<span class='no'>param_set</span>$<span class='no'>values</span>$<span class='no'>method</span> <span class='kw'>=</span> <span class='st'>"helmert"</span>
<span class='no'>poe</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>()</div><div class='output co'>#&gt;    x y.1 y.2
#&gt; 1: a  -1  -1
#&gt; 2: b   1  -1
#&gt; 3: c   0   2</div><div class='input'>
<span class='no'>poe</span>$<span class='no'>param_set</span>$<span class='no'>values</span>$<span class='no'>method</span> <span class='kw'>=</span> <span class='st'>"poly"</span>
<span class='no'>poe</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>()</div><div class='output co'>#&gt;    x           y.1        y.2
#&gt; 1: a -7.071068e-01  0.4082483
#&gt; 2: b -7.850462e-17 -0.8164966
#&gt; 3: c  7.071068e-01  0.4082483</div><div class='input'>
<span class='no'>poe</span>$<span class='no'>param_set</span>$<span class='no'>values</span>$<span class='no'>method</span> <span class='kw'>=</span> <span class='st'>"sum"</span>
<span class='no'>poe</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>()</div><div class='output co'>#&gt;    x y.1 y.2
#&gt; 1: a   1   0
#&gt; 2: b   0   1
#&gt; 3: c  -1  -1</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#construction">Construction</a></li>

      <li><a href="#input-and-output-channels">Input and Output Channels</a></li>

      <li><a href="#state">State</a></li>

      <li><a href="#parameters">Parameters</a></li>

      <li><a href="#internals">Internals</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <!--<div class="copyright">
  <p>Developed by Martin Binder, Florian Pfisterer, Bernd Bischl, Michel Lang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
-->
      </footer>
   </div>

   

  </body>
</html>

