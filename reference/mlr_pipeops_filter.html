<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification -->
<meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84" />
<title>PipeOpFilter — mlr_pipeops_filter • mlr3pipelines</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="PipeOpFilter — mlr_pipeops_filter" />

<meta property="og:description" content="Feature filtering using a mlr3filters::Filter object, see the
mlr3filters package.
If a Filter can only operate on a subset of columns based on column type, then only these features are considered and filtered.
nfeat and frac will count for the features of the type that the Filter can operate on;
this means e.g. that setting nfeat to 0 will only remove features of the type that the Filter can work with." />

<meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/comparison_mlr3pipelines_mlr_sklearn.html">Comparison to Other Packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3pipelines">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PipeOpFilter</h1>
    <small>Source: <a href='https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpFilter.R'><code>R/PipeOpFilter.R</code></a></small>
    </div>

    
    <p>Feature filtering using a <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>mlr3filters::Filter</a></code> object, see the
<a href='https://CRAN.R-project.org/package=mlr3filters'><span class="pkg">mlr3filters</span></a> package.</p>
<p>If a <code>Filter</code> can only operate on a subset of columns based on column type, then only these features are considered and filtered.
<code>nfeat</code> and <code>frac</code> will count for the features of the type that the <code>Filter</code> can operate on;
this means e.g. that setting <code>nfeat</code> to 0 will only remove features of the type that the <code>Filter</code> can work with.</p>
    

        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><code>R6Class</code> object inheriting from <code><a href='PipeOpTaskPreprocSimple.html'>PipeOpTaskPreprocSimple</a></code>/<code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>/<code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    <pre>PipeOpFilter$new(filter, id = filter$id, param_vals = list())
</pre>
<ul>
<li><p><code>filter</code> :: <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code><br />
<code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> used for feature filtering.</p></li>
<li><p><code>id</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code>
Identifier of the resulting  object, defaulting to the <code>id</code> of the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> being used.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br />
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list()</a></code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="input-and-output-channels"><a class="anchor" href="#input-and-output-channels"></a>Input and Output Channels</h2>

    
    <p>Input and output channels are inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>.</p>
<p>The output is the input <code><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a></code> with features removed that were filtered out.</p>
    
    <h2 class="hasAnchor" id="state"><a class="anchor" href="#state"></a>State</h2>

    
    <p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, as well as:</p><ul>
<li><p><code>scores</code> :: named <code>numeric</code><br />
Scores calculated for all features of the training <code><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a></code> which are being used
as cutoff for feature filtering. If <code>frac</code> or <code>nfeat</code> is given, the underlying <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> may choose to not calculate scores for
all features that are given. This only includes features on which the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> can operate; e.g.
if the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> can only operate on numeric features, then scores for factorial features will not be given.</p></li>
<li><p><code>features</code> :: <code>character</code><br />
Names of features that are being kept. Features of types that the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> can not operate on are always being kept.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    
    <p>The parameters are the parameters inherited from the <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, as well as the parameters of the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code>
used by this object. Besides, parameters introduced are:</p><ul>
<li><p><code>filter.nfeat</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/numeric'>numeric(1)</a></code> <br />
Number of features to select.
Mutually exclusive with <code>frac</code> and <code>cutoff</code>.</p></li>
<li><p><code>filter.frac</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/numeric'>numeric(1)</a></code> <br />
Fraction of features to keep.
Mutually exclusive with <code>nfeat</code> and <code>cutoff</code>.</p></li>
<li><p><code>filter.cutoff</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/numeric'>numeric(1)</a></code> <br />
Minimum value of filter heuristic for which to keep features.
Mutually exclusive with <code>nfeat</code> and <code>frac</code>.</p></li>
</ul>
    <p>Note that at least one of <code>filter.nfeat</code>, <code>filter.frac</code>, or <code>filter.cutoff</code> must be given.</p>
    
    <h2 class="hasAnchor" id="internals"><a class="anchor" href="#internals"></a>Internals</h2>

    
    <p>This does <em>not</em> use the <code>$select_cols</code> feature of <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code> to select only features compatible with the <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code>;
instead the whole <code><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a></code> is used by <code>$get_state()</code> and subset internally.</p>
    
    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    
    <p>Fields inherited from <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, as well as:</p><ul>
<li><p><code>filter</code> :: <code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code><br />
<code><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/Filter'>Filter</a></code> that is being used for feature filtering. Do <em>not</em> use this slot to get to the feature filtering scores
after training; instead, use <code>$state$scores</code>. Read-only.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <p>Methods inherited from <code><a href='PipeOpTaskPreprocSimple.html'>PipeOpTaskPreprocSimple</a></code>/<code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>/<code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other PipeOps: <code><a href='PipeOpEnsemble.html'>PipeOpEnsemble</a></code>,
  <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>, <code><a href='PipeOp.html'>PipeOp</a></code>,
  <code><a href='mlr_pipeops_branch.html'>mlr_pipeops_branch</a></code>,
  <code><a href='mlr_pipeops_chunk.html'>mlr_pipeops_chunk</a></code>,
  <code><a href='mlr_pipeops_classbalancing.html'>mlr_pipeops_classbalancing</a></code>,
  <code><a href='mlr_pipeops_classifavg.html'>mlr_pipeops_classifavg</a></code>,
  <code><a href='mlr_pipeops_colapply.html'>mlr_pipeops_colapply</a></code>,
  <code><a href='mlr_pipeops_copy.html'>mlr_pipeops_copy</a></code>,
  <code><a href='mlr_pipeops_encode.html'>mlr_pipeops_encode</a></code>,
  <code><a href='mlr_pipeops_featureunion.html'>mlr_pipeops_featureunion</a></code>,
  <code><a href='mlr_pipeops_impute.html'>mlr_pipeops_impute</a></code>,
  <code><a href='mlr_pipeops_learner.html'>mlr_pipeops_learner</a></code>,
  <code><a href='mlr_pipeops_mutate.html'>mlr_pipeops_mutate</a></code>,
  <code><a href='mlr_pipeops_nop.html'>mlr_pipeops_nop</a></code>,
  <code><a href='mlr_pipeops_pca.html'>mlr_pipeops_pca</a></code>,
  <code><a href='mlr_pipeops_regravg.html'>mlr_pipeops_regravg</a></code>,
  <code><a href='mlr_pipeops_scale.html'>mlr_pipeops_scale</a></code>,
  <code><a href='mlr_pipeops_select.html'>mlr_pipeops_select</a></code>,
  <code><a href='mlr_pipeops_subsample.html'>mlr_pipeops_subsample</a></code>,
  <code><a href='mlr_pipeops_unbranch.html'>mlr_pipeops_unbranch</a></code>,
  <code><a href='mlr_pipeops.html'>mlr_pipeops</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>mlr3</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>mlr3filters</span>)

<span class='co'># setup PipeOpFilter to keep the 5 most important</span>
<span class='co'># features of the spam task w.r.t. their AUC</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"spam"</span>)
<span class='no'>filter</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/flt'>flt</a></span>(<span class='st'>"auc"</span>)
<span class='no'>po</span> <span class='kw'>=</span> <span class='fu'><a href='po.html'>po</a></span>(<span class='st'>"filter"</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='no'>filter</span>)
<span class='no'>po</span>$<span class='no'>param_set</span></div><div class='output co'>#&gt; ParamSet: auc
#&gt;                id    class lower upper levels     default value
#&gt; 1:   filter.nfeat ParamInt     0   Inf        &lt;NoDefault&gt;      
#&gt; 2:    filter.frac ParamDbl     0     1        &lt;NoDefault&gt;      
#&gt; 3:  filter.cutoff ParamDbl  -Inf   Inf        &lt;NoDefault&gt;      
#&gt; 4: affect_columns ParamUty    NA    NA        &lt;NoDefault&gt;      </div><div class='input'><span class='no'>po</span>$<span class='no'>param_set</span>$<span class='no'>values</span>$<span class='no'>filter.nfeat</span> <span class='kw'>=</span> <span class='fl'>5</span>

<span class='co'># filter the task</span>
<span class='no'>filtered_task</span> <span class='kw'>=</span> <span class='no'>po</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='no'>task</span>))<span class='kw'>[[</span><span class='fl'>1</span>]]

<span class='co'># filtered task + extracted AUC scores</span>
<span class='no'>filtered_task</span>$<span class='no'>feature_names</span></div><div class='output co'>#&gt; [1] "capitalAve"      "capitalLong"     "charDollar"      "charExclamation"
#&gt; [5] "your"           </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/head'>head</a></span>(<span class='no'>po</span>$<span class='no'>state</span>$<span class='no'>scores</span>, <span class='fl'>10</span>)</div><div class='output co'>#&gt; charExclamation     capitalLong      capitalAve            your      charDollar 
#&gt;       0.3290461       0.3041626       0.2882004       0.2801659       0.2721394 
#&gt;    capitalTotal            free             our             you          remove 
#&gt;       0.2622801       0.2327285       0.2109325       0.2104681       0.2031303 </div><div class='input'>
<span class='co'># feature selection embedded in a 3-fold cross validation</span>
<span class='co'># keep 30% of features based on their AUC score</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"spam"</span>)
<span class='no'>gr</span> <span class='kw'>=</span> <span class='fu'><a href='po.html'>po</a></span>(<span class='st'>"filter"</span>, <span class='kw'>filter</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/mlr3filters/topics/flt'>flt</a></span>(<span class='st'>"auc"</span>), <span class='kw'>filter.frac</span> <span class='kw'>=</span> <span class='fl'>0.5</span>) <span class='kw'>%&gt;&gt;%</span>
  <span class='fu'><a href='po.html'>po</a></span>(<span class='st'>"learner"</span>, <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.rpart"</span>))
<span class='no'>learner</span> <span class='kw'>=</span> <span class='no'>GraphLearner</span>$<span class='fu'>new</span>(<span class='no'>gr</span>)
<span class='no'>rr</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/resample.html'>resample</a></span>(<span class='no'>task</span>, <span class='no'>learner</span>, <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"cv"</span>, <span class='kw'>folds</span> <span class='kw'>=</span> <span class='fl'>3</span>), <span class='kw'>store_models</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; INFO  [14:12:33.970] Applying learner 'auc.classif.rpart' on task 'spam' (iter 1/3) 
#&gt; INFO  [14:12:34.101] Applying learner 'auc.classif.rpart' on task 'spam' (iter 2/3) 
#&gt; INFO  [14:12:34.245] Applying learner 'auc.classif.rpart' on task 'spam' (iter 3/3) </div><div class='input'><span class='no'>rr</span>$<span class='no'>learners</span><span class='kw'>[[</span><span class='fl'>1</span>]]$<span class='no'>model</span>$<span class='no'>auc</span>$<span class='no'>scores</span></div><div class='output co'>#&gt;   charExclamation       capitalLong        capitalAve              your 
#&gt;       0.335219380       0.309310614       0.297876272       0.272630111 
#&gt;        charDollar      capitalTotal              free               you 
#&gt;       0.268664747       0.262582575       0.237378370       0.211729379 
#&gt;               our            remove                hp             money 
#&gt;       0.210005133       0.202402026       0.175193046       0.171419389 
#&gt;               all            num000          business              mail 
#&gt;       0.167199830       0.154013346       0.143544456       0.137876495 
#&gt;            george               hpl          internet              over 
#&gt;       0.137235315       0.132019729       0.131953669       0.131558650 
#&gt;           receive             email           address             order 
#&gt;       0.125929075       0.125424031       0.118521469       0.111289056 
#&gt;          charHash              make           num1999            credit 
#&gt;       0.103226433       0.098824987       0.097871585       0.090299946 
#&gt;              will            people              labs         addresses 
#&gt;       0.084735538       0.073679700       0.072197822       0.068600473 
#&gt;            num650               edu             num85               lab 
#&gt;       0.068045661       0.066362034       0.064964069       0.060488529 
#&gt;        technology           meeting              data            telnet 
#&gt;       0.051917292       0.051743662       0.047165238       0.046583423 
#&gt;                pm           project            report            num857 
#&gt;       0.041750357       0.041452419       0.038991698       0.031996742 
#&gt; charSquarebracket            num415        conference                re 
#&gt;       0.031573826       0.030525576       0.030341903       0.026796777 
#&gt;          original                cs     charSemicolon              font 
#&gt;       0.025873505       0.023971389       0.023677468       0.022070836 
#&gt;  charRoundbracket            direct             num3d             parts 
#&gt;       0.014496295       0.013620559       0.009517051       0.003412114 
#&gt;             table 
#&gt;       0.002961525 </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#construction">Construction</a></li>

      <li><a href="#input-and-output-channels">Input and Output Channels</a></li>

      <li><a href="#state">State</a></li>

      <li><a href="#parameters">Parameters</a></li>

      <li><a href="#internals">Internals</a></li>

      <li><a href="#fields">Fields</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <!--<div class="copyright">
  <p>Developed by Martin Binder, Florian Pfisterer, Bernd Bischl, Michel Lang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
-->
      </footer>
   </div>

   

  </body>
</html>

