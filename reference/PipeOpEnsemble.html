<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification -->
<meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84" />
<title>PipeOpEnsemble — PipeOpEnsemble • mlr3pipelines</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="PipeOpEnsemble — PipeOpEnsemble" />

<meta property="og:description" content="Parent class for PipeOps that aggregate predictions. Implements the $train_internal() and $predict_internal() methods necessary
for a PipeOp and requires deriving classes to create the private$weighted_avg_predictions() function." />

<meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/comparison_mlr3pipelines_mlr_sklearn.html">Comparison to Other Packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3pipelines">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PipeOpEnsemble</h1>
    <small>Source: <a href='https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpEnsemble.R'><code>R/PipeOpEnsemble.R</code></a></small>
    </div>

    
    <p>Parent class for <code><a href='PipeOp.html'>PipeOp</a></code>s that aggregate predictions. Implements the <code>$train_internal()</code> and <code>$predict_internal()</code> methods necessary
for a <code>PipeOp</code> and requires deriving classes to create the <code>private$weighted_avg_predictions()</code> function.</p>
    

        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>Abstract <code>R6Class</code> inheriting from <code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
    <p>Note: This object is typically constructed via a derived class, e.g. <code><a href='mlr_pipeops_classifavg.html'>PipeOpClassifAvg</a></code> or <code><a href='mlr_pipeops_regravg.html'>PipeOpRegrAvg</a></code>.</p><pre>PipeOpEnsemble$new(innum = 0, id, param_set = ParamSet$new(), param_vals = list(), packages = character(0), prediction_type = "Prediction")
</pre>
<ul>
<li><p><code>innum</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/numeric'>numeric(1)</a></code><br />
Determines the number of input channels.
If <code>innum</code> is 0 (default), a vararg input channel is created that can take an arbitrary number of inputs.</p></li>
<li><p><code>id</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code><br />
Identifier of the resulting  object.</p></li>
<li><p><code>param_set</code> :: <code><a href='https://paradox.mlr-org.com/reference/ParamSet.html'>ParamSet</a></code><br />
("Hyper"-)Parameters in form of a <code><a href='https://paradox.mlr-org.com/reference/ParamSet.html'>ParamSet</a></code> for the resulting <code><a href='PipeOp.html'>PipeOp</a></code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br />
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list()</a></code>.</p></li>
<li><p><code>packages</code> :: <code>character</code><br />
Set of packages required for this <code>PipeOp</code>. These packages are loaded during <code>$train()</code> and <code>$predict()</code>, but not attached.
Default <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(0)</a></code>.</p></li>
<li><p><code>prediction_type</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code><br />
The <code>predict</code> entry of the <code>$input</code> and <code>$output</code> type specifications.
Should be <code>"Prediction"</code> (default) or one of its subclasses, e.g. <code>"PredictionClassif"</code>, and correspond to the type accepted by
<code>$train_internal()</code> and <code>$predict_internal()</code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="input-and-output-channels"><a class="anchor" href="#input-and-output-channels"></a>Input and Output Channels</h2>

    
    <p><code>PipeOpEnsemble</code> has multiple input channels depending on the <code>innum</code> construction argument, named <code>"input1"</code>, <code>"input2"</code>, ...
if <code>innum</code> is nonzero; if <code>innum</code> is 0, there is only one <em>vararg</em> input channel named <code>"..."</code>.
All input channels take only <code>NULL</code> during training and take a <code><a href='https://mlr3.mlr-org.com/reference/Prediction.html'>Prediction</a></code> during prediction.</p>
<p><code>PipeOpEnsemble</code> has one output channel named <code>"output"</code>, producing <code>NULL</code> during training and a <code><a href='https://mlr3.mlr-org.com/reference/Prediction.html'>Prediction</a></code> during prediction.</p>
<p>The output during prediction is in some way a weighted averaged representation of the input.</p>
    
    <h2 class="hasAnchor" id="state"><a class="anchor" href="#state"></a>State</h2>

    
    <p>The <code>$state</code> is left empty (<code><a href='https://www.rdocumentation.org/packages/base/topics/list'>list()</a></code>).</p>
    
    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    
    <ul>
<li><p><code>weights</code> :: <code>numeric</code><br />
Relative weights of input predictions. If this has length 1, it is ignored and weighs all inputs equally. Otherwise it must have
length equal to the number of connected inputs. Initialized to 1 (equal weights).</p></li>
</ul>
    
    <h2 class="hasAnchor" id="internals"><a class="anchor" href="#internals"></a>Internals</h2>

    
    <p>The commonality of ensemble methods using <code>PipeOpEnsemble</code> is that they take a <code>NULL</code>-input during training and save an empty <code>$state</code>. They can be
used following a set of <code><a href='mlr_pipeops_learner.html'>PipeOpLearner</a></code> <code><a href='PipeOp.html'>PipeOp</a></code>s to perform (possibly weighted) prediction averaging. See e.g.
<code><a href='mlr_pipeops_classifavg.html'>PipeOpClassifAvg</a></code> and <code><a href='mlr_pipeops_regravg.html'>PipeOpRegrAvg</a></code> which both inherit from this class.</p>
<p>Should it be necessary to use the output of preceding <code><a href='https://mlr3.mlr-org.com/reference/Learner.html'>Learner</a></code>s
during the "training" phase, then <code>PipeOpEnsemble</code> should not be used. In fact, if training time behaviour of a <code><a href='https://mlr3.mlr-org.com/reference/Learner.html'>Learner</a></code> is important, then
one should use a <code><a href='mlr_pipeops_learner_cv.html'>PipeOpLearnerCV</a></code> instead of a <code><a href='mlr_pipeops_learner.html'>PipeOpLearner</a></code>, and the ensembling can be done by a <code><a href='https://mlr3.mlr-org.com/reference/Learner.html'>Learner</a></code> encapsuled by a <code><a href='mlr_pipeops_learner.html'>PipeOpLearner</a></code>.
See <code><a href='mlr_learners_avg.html'>LearnerClassifAvg</a></code> and <code><a href='mlr_learners_avg.html'>LearnerRegrAvg</a></code> for examples.</p>
    
    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    
    <p>Only fields inherited from <code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <p>Methods inherited from <code><a href='PipeOp.html'>PipeOp</a></code> as well as:</p><ul>
<li><p><code>weighted_avg_prediction(inputs, weights, row_ids, truth)</code><br />
(<code>list</code> of <code><a href='https://mlr3.mlr-org.com/reference/Prediction.html'>Prediction</a></code>, <code>numeric</code>, <code>integer</code> | <code>character</code>, <code>list</code>) -&gt; <code>NULL</code><br />
Create <code><a href='https://mlr3.mlr-org.com/reference/Prediction.html'>Prediction</a></code>s that correspond to the weighted average of incoming <code><a href='https://mlr3.mlr-org.com/reference/Prediction.html'>Prediction</a></code>s. This is
called by <code>$predict_internal()</code> with cleaned and sanity-checked values: <code>inputs</code> are guaranteed to fit together,
<code>row_ids</code> and <code>truth</code> are guaranteed to be the same as each one in <code>inputs</code>, and <code>weights</code> is guaranteed to have the same length as <code>inputs</code>.<br />
This method is abstract, it must be implemented by deriving classes.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other PipeOps: <code><a href='PipeOpTaskPreproc.html'>PipeOpTaskPreproc</a></code>,
  <code><a href='PipeOp.html'>PipeOp</a></code>, <code><a href='mlr_pipeops_branch.html'>mlr_pipeops_branch</a></code>,
  <code><a href='mlr_pipeops_chunk.html'>mlr_pipeops_chunk</a></code>,
  <code><a href='mlr_pipeops_classbalancing.html'>mlr_pipeops_classbalancing</a></code>,
  <code><a href='mlr_pipeops_classifavg.html'>mlr_pipeops_classifavg</a></code>,
  <code><a href='mlr_pipeops_colapply.html'>mlr_pipeops_colapply</a></code>,
  <code><a href='mlr_pipeops_copy.html'>mlr_pipeops_copy</a></code>,
  <code><a href='mlr_pipeops_encode.html'>mlr_pipeops_encode</a></code>,
  <code><a href='mlr_pipeops_featureunion.html'>mlr_pipeops_featureunion</a></code>,
  <code><a href='mlr_pipeops_filter.html'>mlr_pipeops_filter</a></code>,
  <code><a href='mlr_pipeops_impute.html'>mlr_pipeops_impute</a></code>,
  <code><a href='mlr_pipeops_learner.html'>mlr_pipeops_learner</a></code>,
  <code><a href='mlr_pipeops_mutate.html'>mlr_pipeops_mutate</a></code>,
  <code><a href='mlr_pipeops_nop.html'>mlr_pipeops_nop</a></code>,
  <code><a href='mlr_pipeops_pca.html'>mlr_pipeops_pca</a></code>,
  <code><a href='mlr_pipeops_regravg.html'>mlr_pipeops_regravg</a></code>,
  <code><a href='mlr_pipeops_scale.html'>mlr_pipeops_scale</a></code>,
  <code><a href='mlr_pipeops_select.html'>mlr_pipeops_select</a></code>,
  <code><a href='mlr_pipeops_subsample.html'>mlr_pipeops_subsample</a></code>,
  <code><a href='mlr_pipeops_unbranch.html'>mlr_pipeops_unbranch</a></code>,
  <code><a href='mlr_pipeops.html'>mlr_pipeops</a></code></p>
<p>Other Ensembles: <code><a href='mlr_learners_avg.html'>mlr_learners_avg</a></code>,
  <code><a href='mlr_pipeops_classifavg.html'>mlr_pipeops_classifavg</a></code>,
  <code><a href='mlr_pipeops_regravg.html'>mlr_pipeops_regravg</a></code></p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#construction">Construction</a></li>

      <li><a href="#input-and-output-channels">Input and Output Channels</a></li>

      <li><a href="#state">State</a></li>

      <li><a href="#parameters">Parameters</a></li>

      <li><a href="#internals">Internals</a></li>

      <li><a href="#fields">Fields</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <!--<div class="copyright">
  <p>Developed by Martin Binder, Florian Pfisterer, Bernd Bischl, Michel Lang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
-->
      </footer>
   </div>

   

  </body>
</html>

